{% extends "base.html" %}

{% block title %}Portfolio Projects - Manager{% endblock %}

{% block content %}
<h1>ğŸ“ Portfolio Project Manager</h1>
<p class="subtitle">Manage your Hugo portfolio projects easily</p>

<div class="button-group">
    <a href="{{ url_for('add_project') }}" class="btn">â• Add New Project</a>
    <form method="POST" action="{{ url_for('build_site') }}" style="display: inline;">
        <button type="submit" class="btn btn-secondary">ğŸ”¨ Build Site</button>
    </form>
    <button onclick="showDeployForm()" class="btn" style="background: #28a745;">ğŸš€ Deploy to GitHub</button>
</div>

<!-- Deploy Form Modal -->
<div id="deployModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; min-width: 400px;">
        <h2 style="margin-bottom: 20px;">Deploy to GitHub</h2>
        <form method="POST" action="{{ url_for('deploy_site') }}">
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 8px; color: #333; font-weight: 600;">Commit Message</label>
                <input type="text" name="commit_message" value="Update portfolio content"
                       style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
            </div>
            <div style="display: flex; gap: 10px;">
                <button type="submit" class="btn" style="background: #28a745;">ğŸš€ Deploy</button>
                <button type="button" onclick="hideDeployForm()" class="btn btn-secondary">Cancel</button>
            </div>
        </form>
    </div>
</div>

<script>
function showDeployForm() {
    document.getElementById('deployModal').style.display = 'block';
}
function hideDeployForm() {
    document.getElementById('deployModal').style.display = 'none';
}
</script>

<h2>Your Projects ({{ projects|length }})</h2>

{% if projects %}
    <div class="projects-grid">
        {% for project in projects %}
            <div class="project-card">
                <h3>{{ project }}</h3>
                <a href="{{ url_for('view_project', project_name=project) }}" class="btn btn-secondary" style="margin-top: 10px;">View Details</a>
            </div>
        {% endfor %}
    </div>
{% else %}
    <p style="color: #666; margin-top: 20px;">No projects yet. Click "Add New Project" to get started!</p>
{% endif %}
{% endblock %}

